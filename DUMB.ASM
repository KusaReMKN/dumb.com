	NAME	DUMB
	TITLE	DUMB.ASM -- Emulate a dumb terminal

CODE	SEGMENT
	ORG	100H
	ASSUME	CS:CODE, DS:CODE, ES:CODE, SS:CODE

START:
	XOR	BX, BX		; STDIN
	MOV	AX, 4406H	; IOCTL, Get input status
	INT	21H
	JC	ERROR
	OR	AL, AL
	JNZ	SEND
	MOV	BX, 0003H	; AUX (Serial Port)
	MOV	AX, 4406H	; IOCTL, Get input status
	INT	21H
	JC	ERROR
	OR	AL, AL
	JNZ	RECV
	JMP	START
SEND:
	MOV	AH, 07H		; RAW_CON_INPUT
	INT	21H
	JC	ERROR
	MOV	DL, AL
	MOV	AH, 04H		; STD_AUX_OUTPUT
	INT	21H
	JC	ERROR
	JMP	START
RECV:
	MOV	AH, 03H		; STD_AUX_INPUT
	INT	21H
	JC	ERROR
	MOV	DL, AL
	MOV	AH, 02H		; STD_CON_OUTPUT
	INT	21H
	JC	ERROR
	JMP	START
ERROR:
	MOV	AX, 4C01H	; EXIT
	INT	21H

CODE	ENDS
	END	START
